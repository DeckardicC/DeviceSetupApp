# Настройка/Диагностика панели — сценарии использования

**Важно:** Вкладка "Настройка/Диагностика панели" доступна только на заданиях с услугой "Гудлайн домофон".


M2.4. Просмотр данных о панели с добавлением номера телефона для просмотра камер

Предварительные условия:
- Пользователь находится в задании
- Задание содержит услугу "Гудлайн домофон"
- Пользователь перешел на 4‑ю вкладку задания
- Выбрал «Настройка/Диагностика панели»

Основной сценарий:
1. Пользователь выбирает пункт «Данные о панели»
2. Система отображает сводную информацию о панели (Рис. 1):
   - На скрине: Экран с информацией о панели
   - Модель панели
   - Модель камеры
   - MAC-адрес
   - Серийный номер
   - Температура
   - Входное напряжение
   - Время непрерывной работы
   - Версии ПО (opt, media, rootfs)
   - SIP (статус регистрации и пояснение)
3. Пользователь нажимает кнопку «Доступ до камер»
4. Система открывает модальное окно с полем ввода номера телефона инженера связи (Рис. 2)
   - На скрине: Модальное окно с полем ввода номера телефона инженера связи
5. Система автоматически подтягивает номер телефона инженера связи на задании (для сценария)
6. Пользователь вводит номер телефона через клавиатуру и нажимает «Сохранить»
7. Система добавляет этот номер телефона в карточку квартиры 1100 в доме, в котором идет задание

Расширения:
6а. Номер телефона не был введен
- Система указывает на ошибку и просит ввести номер


M2.5. Управление ключами домофона

Предварительные условия:
- Пользователь находится во вкладке «Настройка/Диагностика панели»
- Раздел «Домофон» открыт

Основной сценарий:
1. Пользователь выбирает «Ключи»
2. Система отображает список ключей с поиском и действиями (Рис. 1)
   - На скрине: Экран со списком ключей, полем поиска и кнопкой "Добавить ключ"
3. Пользователь нажимает кнопку «Добавить ключ»
4. Система открывает модальное окно с шагами (Рис. 2):
   - На скрине: Модальное окно добавления ключа на этапе выбора подъезда
   - Выбор подъезда
   - Выбор квартиры
   - NFC-считывание ключа
   - Ввод имени ключа
5. Пользователь последовательно проходит все шаги и нажимает «Сохранить»
6. Система проверяет, не привязан ли ключ к другому адресу:
   - Если ключ свободен → данные сохраняются, показывается уведомление "Ключ успешно добавлен"
   - Если ключ занят → показывается сообщение "Ключ уже привязан к другому адресу. Для повторного использования удалите его из текущей привязки."
7. Пользователь открывает ключ в списке, изменяет данные, сохраняет
8. Система обновляет ключ в списке
9. Пользователь удаляет ключ
10. Система убирает ключ из списка после подтверждения

Расширения:
2а. Пользователь вводит запрос в поле поиска
- Система фильтрует список по идентификатору ключа или квартире
- Пользователь может переключать режим поиска (по ключу или по квартире)

А1. NFC недоступен/не сработал
- Система показывает сообщение об ошибке
- Пользователь может нажать "Повторить считывание" для повторной попытки

А2. Имя ключа не введено
- Система показывает сообщение: "Введите имя ключа"

А3. Ключ уже привязан к другому адресу
- Система показывает сообщение: "Ключ уже привязан к другому адресу. Для повторного использования удалите его из текущей привязки."

А4. Пользователь нажимает кнопку с тремя точками (меню)
- Система показывает меню с опциями:
  - "Добавить файл CSV" - для импорта ключей из CSV файла
  - "Скачать файл CSV" - для экспорта ключей в CSV файл
  - "Управление ключами" - открывает модальное окно с настройкой "Проверка обратного идентификатора"


M2.6. Просмотр и настройка квартир домофона

Предварительные условия:
- Пользователь находится во вкладке «Настройка/Диагностика панели»
- Раздел «Домофон» открыт

Основной сценарий:
1. Пользователь выбирает «Квартиры»
2. Система отображает список квартир с поиском и пагинацией (Рис. 1)
   - На скрине: Экран со списком квартир, полем поиска и пагинацией
3. Пользователь просматривает список квартир
4. Пользователь открывает настройки квартиры через кнопку «Настройки» на карточке квартиры

Расширения:
2а. Пользователь вводит запрос в поиск
- Система показывает только подходящие квартиры

2б. В списке более 20 квартир
- Система отображает пагинацию; переключение страниц показывает соответствующие элементы

2в. Пользователь открывает меню «…» и выбирает «Общие уровни трубок»
- Система открывает форму общих значений (Рис. 2); пользователь сохраняет — значения применены
  - На скрине: Форма настройки общих уровней трубок

2г. Пользователь выбирает «Сброс персональных настроек квартир»
- Система запрашивает подтверждение и сбрасывает индивидуальные настройки


M2.7. Настройка параметров квартиры через шесть вкладок

Предварительные условия:
- Пользователь находится на экране «Квартиры»
- Карточки квартир отображены

Основной сценарий:
1. Пользователь нажимает «Настройки» на нужной квартире
2. Система открывает модальное окно с навигацией по вкладкам (Рис. 1)
   - На скрине: Модальное окно с вкладками: Основные, Аудио, Ключи, Коды, SIP‑номер, Диагностика
3. Пользователь последовательно настраивает вкладки и сохраняет изменения

Расширения:
3а. «Основные» — пользователь меняет переключатели и настраивает "Тестовый вызов"
- Пользователь выбирает тип тестового вызова из выпадающего списка:
  * "Вызов в аналоговую трубку (без проверок)"
  * "Вызов в SIP (без проверок)"
  * "Вызов в аналоговую трубку и SIP"
- При нажатии на кнопку "Тестовый звонок" (если выбран тип вызова) начинается звонок
- Во время звонка кнопка меняется на ярко-зеленую "Завершить звонок"
- Пользователь нажимает "Завершить звонок" для завершения звонка
- Система сохраняет новые состояния

3б. «Аудио» — пользователь устанавливает значения ползунков
- Система фиксирует значения

3в. «Ключи» — пользователь добавляет/удаляет ключи квартиры
- Пользователь нажимает «Добавить ключ»
- Система сразу открывает экран для NFC-считывания ключа (без выбора подъезда и квартиры, так как уже в настройках конкретной квартиры)
- Пользователь прикладывает ключ к телефону для NFC-считывания
- После успешного считывания пользователь вводит имя ключа и нажимает «Сохранить»
- Система проверяет ключ на дубликаты и добавляет в список ключей квартиры
- Пользователь может удалять ключи из списка
- При ошибках NFC показываются соответствующие сообщения (см. M2.5, расширения А1-А3)

3г. «Коды» — пользователь добавляет/удаляет коды
- Пользователь нажимает кнопку «Добавить код»
- Система открывает поле ввода для нового кода
- Пользователь вводит код из 5 цифр и подтверждает
- Система проверяет код (5 цифр) и добавляет в список, если он уникален
- Пользователь может удалять отдельные коды
- Пользователь может удалить все коды кнопкой «Удалить все коды»

3д. «SIP‑номер» — пользователь добавляет/удаляет SIP-номера
- Пользователь видит список SIP-номеров
- Пользователь может вводить и добавлять дополнительные SIP-номера кнопкой «Добавить»
- Пользователь может удалять SIP-номера, но должен остаться хотя бы один
- Если остается только один SIP-номер, кнопка удаления для него скрывается
- Система сохраняет изменения

3е. «Диагностика» — пользователь вводит напряжения и сохраняет
- Блок "Диагностика" отображается первым (выше блока "Уровни напряжения")
- Пользователь может запустить диагностику
- Пользователь вводит напряжения и сохраняет
- Система применяет параметры


M2.8. Настройка матрицы коммутатора

Предварительные условия:
- Пользователь находится во вкладке «Настройка/Диагностика панели»
- Раздел «Домофон» открыт

Основной сценарий:
1. Пользователь выбирает «Матрица»
2. Система отображает выбор коммутатора и таблицу матрицы (Рис. 1)
   - На скрине: Экран с выбором коммутатора и таблицей матрицы соединений
3. Пользователь включает режим редактирования, нажимает на ячейку для редактирования
4. Система открывает модальное окно редактирования ячейки (Рис. 2)
   - На скрине: Модальное окно редактирования ячейки матрицы с кнопками "+" и "-" и полем ввода
5. Пользователь может изменять значение:
   - С помощью кнопок "+" и "-" для увеличения/уменьшения значения
   - С помощью клавиатуры для прямого ввода
6. Пользователь сохраняет изменения
7. Система применяет новую конфигурацию
8. Пользователь может использовать "Мастер автозаполнения"
9. Система открывает модальное окно мастера (Рис. 3)
   - На скрине: Модальное окно мастера автозаполнения с полями: Производитель, Модель, Количество квартир, Номер 1-ой квартиры в матрице
10. Пользователь заполняет поля:
    - Производитель (выбор из списка)
    - Модель (выбор из списка, зависит от производителя)
    - Количество квартир (числовое поле с кнопками +/-)
    - Номер 1-ой квартиры в матрице (числовое поле с кнопками +/-)
11. Пользователь нажимает "Запустить"
12. Система выполняет автозаполнение матрицы согласно введенным параметрам

Расширения:
4а. Пользователь нажимает «Отмена»
- Система возвращает исходное состояние матрицы

5а. Пользователь не заполнил все обязательные поля в мастере автозаполнения
- Система показывает ошибку и просит заполнить все поля


M2.9. Настройка режимов входа

Предварительные условия:
- Пользователь находится во вкладке «Настройка/Диагностика панели»
- Раздел «Домофон» открыт

Основной сценарий:
1. Пользователь выбирает «Вход»
2. Система показывает доступные режимы
3. Пользователь меняет нужные режимы
4. Система сохраняет новые состояния


M2.10. Настройка бегущей строки на панели

Предварительные условия:
- Пользователь находится во вкладке «Настройка/Диагностика панели»
- Раздел «Домофон» открыт

Основной сценарий:
1. Пользователь выбирает «Бегущая строка»
2. Система отображает переключатель включения/выключения бегущей строки (Рис. 1)
   - На скрине: Экран настройки бегущей строки с переключателем, полем скорости и полем ввода текста
3. Если бегущая строка включена, система показывает:
   - Поле выбора скорости бегущей строки
   - Поле ввода текста бегущей строки
4. При фокусе на поле ввода текста клавиатура автоматически открывается
5. Пользователь редактирует текст (максимум 99 символов)
6. Система показывает счетчик оставшихся символов
7. Пользователь выбирает скорость бегущей строки из списка
8. Пользователь сохраняет изменения
9. Система применяет изменения

Расширения:
5а. Пользователь пытается ввести более 99 символов
- Система ограничивает ввод до 99 символов


M2.11. Настройка параметров звука

Предварительные условия:
- Пользователь находится во вкладке «Настройка/Диагностика панели»
- Раздел «Аудио» открыт

Основной сценарий:
1. Пользователь выбирает «Звук»
2. Система показывает набор ползунков (Рис. 1)
   - На скрине: Экран настройки звука с ползунками для различных параметров
3. Пользователь устанавливает значения
4. Система сохраняет изменения


M2.12. Настройка эквалайзера

Предварительные условия:
- Пользователь находится во вкладке «Настройка/Диагностика панели»
- Раздел «Аудио» открыт

Основной сценарий:
1. Пользователь выбирает «Эквалайзер»
2. Система показывает полосы частот (Рис. 1)
   - На скрине: Экран эквалайзера с полосами частот для настройки
3. Пользователь настраивает значения
4. Система сохраняет изменения


M2.13. Просмотр статуса SIP-регистрации

Предварительные условия:
- Пользователь находится во вкладке «Настройка/Диагностика панели»
- Раздел «SIP» открыт

Основной сценарий:
1. Пользователь выбирает «SIP-Аккаунт»
2. Система показывает статус регистрации (зарегистрирован/не зарегистрирован) с визуальным индикатором (Рис. 1)
   - На скрине: Экран SIP-Аккаунта со статусом регистрации и визуальным индикатором
3. Система отображает пояснительную информацию о статусе регистрации
4. Если устройство не зарегистрировано, система показывает предупреждение с рекомендациями по проверке настроек


M2.14. Настройка параметров видеопотоков

Предварительные условия:
- Пользователь находится во вкладке «Настройка/Диагностика панели»
- Раздел «Видео» открыт

Основной сценарий:
1. Пользователь выбирает «Видеопоток»
2. Система показывает параметры основного и второго потока (Рис. 1)
   - На скрине: Экран настройки видеопотоков с параметрами основного и второго потока
3. Пользователь выбирает варианты в списках
4. Система сохраняет выбранные параметры


M2.15. Настройка сетевых параметров устройства

Предварительные условия:
- Пользователь находится во вкладке «Настройка/Диагностика панели»
- Раздел «Сеть» открыт

Основной сценарий:
1. Пользователь выбирает «Настройка сети»
2. Система показывает режимы «Статический IP» и «DHCP» с соответствующими полями (Рис. 1)
   - На скрине: Экран настройки сети с выбором режима и полями для ввода параметров
3. Пользователь выбирает режим и заполняет/подтверждает параметры
4. Система применяет выбранные настройки

Расширения:
3а. Выбран «Статический IP»
- Пользователь вводит IP, маску, шлюз, DNS и сохраняет — параметры применены

3б. Выбран «DHCP»
- Пользователь подтверждает режим, при необходимости задаёт DNS — параметры назначаются автоматически


M2.16. Настройка отправки системных логов (Syslog)

Предварительные условия:
- Пользователь находится во вкладке «Настройка/Диагностика панели»
- Раздел «Сеть» открыт

Основной сценарий:
1. Пользователь выбирает «Syslog»
2. Система показывает переключатель включения/выключения отправки логов (Рис. 1)
   - На скрине: Экран настройки Syslog с переключателем и полями адреса и порта
3. Если переключатель включен, система показывает поля адреса и порта
4. Пользователь включает переключатель, вводит адрес и порт, сохраняет
5. Система включает отправку логов


M2.17. Обновление прошивки устройства

Предварительные условия:
- Пользователь находится во вкладке «Настройка/Диагностика панели»
- Раздел «Система» открыт
- Файл обновления доступен

Основной сценарий:
1. Пользователь выбирает «Обновление»
2. Система отображает текущую версию прошивки (Рис. 1)
   - На скрине: Экран обновления с отображением текущей версии прошивки
3. Система предлагает выбрать метод обновления (HTTP или FTP)
4. Пользователь заполняет форму:
   - Путь до папки с файлами на сервере
   - Название файла (формат .isoam)
   - При выборе FTP: логин и пароль
5. Пользователь может открыть раздел "Расширенные настройки"
6. Система показывает расширенные опции (Рис. 2):
   - На скрине: Раскрытый раздел "Расширенные настройки" с переключателями обновления компонентов
   - Обновить микроконтроллер (переключатель)
   - Обновить приложения (переключатель)
   - Обновить аудиозаписи (онлайн-ассистент, оповещения) (переключатель)
   - Обновить библиотеки (переключатель)
7. Пользователь настраивает необходимые переключатели
8. Пользователь нажимает кнопку "Обновить устройство"
9. Система запрашивает подтверждение
10. После подтверждения система загружает, проверяет и уведомляет об успехе; при необходимости инициирует установку/перезагрузку

Расширения:
4а. Произошла ошибка загрузки/проверки
- Система сообщает о проблеме и предлагает повторить

5а. Пользователь не заполнил обязательные поля
- Система показывает ошибку и просит заполнить все обязательные поля


M2.18. Настройка даты, времени и синхронизации

Предварительные условия:
- Пользователь находится во вкладке «Настройка/Диагностика панели»
- Раздел «Система» открыт

Основной сценарий:
1. Пользователь выбирает «Дата и время»
2. Система показывает текущие значения и настройки синхронизации (Рис. 1)
   - На скрине: Экран настройки даты и времени с текущими значениями и настройками синхронизации
3. Пользователь выбирает временную зону и/или сервер времени, включает синхронизацию
4. Система применяет и синхронизирует время


M2.19. Перезагрузка устройства с двойным подтверждением

Предварительные условия:
- Пользователь находится во вкладке «Настройка/Диагностика панели»
- Раздел «Система» открыт

Основной сценарий:
1. Пользователь выбирает «Перезагрузка»
2. Система показывает кнопку перезагрузки (Рис. 1)
   - На скрине: Экран перезагрузки с кнопкой перезагрузки
3. Пользователь нажимает кнопку перезагрузки
4. Система запрашивает подтверждение (первый диалог) (Рис. 2)
   - На скрине: Модальное окно первого подтверждения перезагрузки
5. Пользователь подтверждает
6. Система запрашивает второе подтверждение (второй диалог) (Рис. 3)
   - На скрине: Модальное окно второго подтверждения перезагрузки
7. Пользователь подтверждает второй раз
8. Система инициирует перезагрузку

Расширения:
4а. Пользователь отменяет на первом диалоге
- Перезагрузка не выполняется

6а. Пользователь отменяет на втором диалоге
- Перезагрузка не выполняется


M2.20. Сброс устройства до заводских настроек с двойным подтверждением

Предварительные условия:
- Пользователь находится во вкладке «Настройка/Диагностика панели»
- Раздел «Система» открыт

Основной сценарий:
1. Пользователь выбирает «Сброс устройства»
2. Система показывает кнопку сброса и предупреждение (Рис. 1)
   - На скрине: Экран сброса устройства с предупреждением и кнопкой "Сбросить устройство"
3. Пользователь нажимает кнопку «Сбросить устройство»
4. Система запрашивает подтверждение (первый диалог) (Рис. 2)
   - На скрине: Модальное окно первого подтверждения сброса устройства
5. Пользователь подтверждает
6. Система запрашивает второе подтверждение (второй диалог) (Рис. 3)
   - На скрине: Модальное окно второго подтверждения сброса устройства
7. Пользователь подтверждает второй раз
8. Система выполняет полный сброс всех настроек устройства до заводских значений

Расширения:
4а. Пользователь отменяет на первом диалоге
- Сброс не выполняется

6а. Пользователь отменяет на втором диалоге
- Сброс не выполняется


M2.21. Навигация по разделам меню «Настройка/Диагностика панели»

Предварительные условия:
- Пользователь находится в задании с услугой "Гудлайн домофон"
- Пользователь перешел на 4‑ю вкладку задания
- Вкладка "Настройка/Диагностика панели" доступна

Основной сценарий:
1. Пользователь разворачивает/сворачивает разделы меню
2. Система показывает/скрывает пункты разделов (Рис. 1)
   - На скрине: Экран главного меню "Настройка/Диагностика панели" с разделами: Данные о панели, Домофон, Аудио, SIP, Видео, Сеть, Система
3. Переход по пункту открывает соответствующий экран
4. На всех экранах клавиатура автоматически открывается при фокусе на полях ввода
5. На всех экранах контент не обрезается снизу благодаря правильной настройке padding


M2.22. Поиск и пагинация элементов в списках

Предварительные условия:
- Пользователь находится на экране «Ключи» или «Квартиры»

Основной сценарий:
1. Пользователь вводит запрос в поле поиска
2. Система фильтрует список в реальном времени
3. При большом объёме данных пользователь переключает страницы
4. Система показывает элементы выбранной страницы
